---
id: ex8-1
title: Exercise 8-1
---

:::info
As you work, feel free to discuss with other students and ask questions of the Professor/CAs. Aim to complete as much as possible during our meeting time. Work at home to complete what you do not get through during class. You will not hand in your work.
:::

:::info
Get started by running `git pull` to update your clone of the public repository, and then copying the `exercises/ex8-1` directory into your personal git repository.
:::


:::tip Learning Objectives
Reinforces concepts learned in today meeting:
* C++ basics: I/O using iostream library, how to compile/link/execute
* Using the C++ Standard Template Library (std::vector, std::map) and iterators
:::

:::danger Goal
Complete the implementation of code which counts the number of occurrences of particular words in a file, and then reports the results in different orderings by utilizing `std::map`.
:::

### Part 1
Pull the starter code for this exercise from the public repo by taking the following steps:

1.	Log into ugrad, then navigate into `cs220-sp21-public`, type `git status` and confirm you have not modified any files or accidentally committed to the public repo. Ask for help if you have added or committed files there and need to undo.

2.	Type `git pull` to synchronize your local repo and working copy with the remote repo.

3.	Confirm that you can see the template files for todayâ€™s exercise by typing `ls exercises/ex8-1` -- you should see files named `map-simple.cpp`, `input.txt`, `main.cpp`, and `monkeys.txt inside.

4.	Copy `map-simple.cpp`, `input.txt`, `main.cpp`, and `monkeys.txt` from the public class repository (in the `/exercises/ex8-1/` directory) to your personal repo in a new directory named `ex8-1` under `~/cs220/exercises/`.


### Part 2
The supplied file `map-simple.cpp` is a completed program that takes in input pairs from standard input representing phone contacts made of a name string and a phone number string, and inserts each into a `std::map` structure.  The name is the key in the map, and the phone number for that person is the value associated with that key in the map.  This program will serve as a reference for you to follow as you work with `std::map`s to complete the remainder of the exercise.

First, compile and link `map-simple.cpp` by typing:

```bash
g++ -std=c++11 -Wall -Wextra -pedantic map-simple.cpp -o map-simple
```

Next, run the executable `map-simple` using the file `input.txt` in place of interactive input by typing:

```bash
cat input.txt | ./map-simple
```

Now, look inside `input.txt` and then the code in `map-simple.cpp` and try to to understand how it works.  Here are a few items we want to highlight:

* Notice that four (name,phone) pairs are present in the input file, but only three remain in the map when it is output.  This illustrates an important point about maps: only one occurrence of a key value is allowed (that is, the original value for the key Sara is replaced by the second value supplied later in the input file).  
* We make use of a `const_iterator` named `it` to traverse the map entries so we can output them.  Each entry is a pair, and it runs over each of them in succession, so when we access `it->first`, we get the current entry's *key* (i.e. name), and when we access `it->second`, we get the current entry's value (i.e. phone number).
*	Note also that the values in the map are output in ascending order by key (i.e. name) value, even though they were not inserted in that order.  We did not need to explicitly sort them in our code, either.  

:::tip
A map will always organize its entries in ascending order by key.
:::

Before moving on to the next portion, make sure you follow what is happening in this code. Rushing to the next part without understanding this code will not get you done with this exercise any more quickly! Please ask questions if something does not make sense.  

### Part 3
Now, you will work to edit `main.cpp` to work with maps in a more sophisticated way. 

In this part, you'll add code to read in words from standard input until end of file occurs, and populate the `map<string, int>` named `counters` so that each entry has a key which is a word collected and the corresponding value is the number of times that word appears in the file.  The code to output the counters map contents is already present in this file.   

Once you've modified it, you'll compile `main.cpp` using:

```bash
g++ -std=c++11 -Wall -Wextra -pedantic main.cpp -o main
```

Next, run the executable `main` using the file `monkeys.txt` in place of interactive input by typing:

```
cat monkeys.txt | ./main
```



Note that the contents of `monkeys.txt` are as shown below:                                   

`and Mama called the doctor and the doctor said no more monkeys`

So, if your code works correctly, you should see the following output:

```bash
word Mama has 1 occurrences 
word and has 2 occurrences 
word called has 1 occurrences 
word doctor has 2 occurrences 
word monkeys has 1 occurrences 
word more has 1 occurrences 
word no has 1 occurrences 
word said has 1 occurrences 
word the has 2 occurrences
```

### Part 4
Once you have the counters map properly populated, and you confirmed that your output is correct, you can now work on rearranging that data you collected during Part 3.

In this part, you need to write code that will go through the simple `counters` map you populated and copy over the data into a new map called `words_by_freq`, but rearrange your data so that each entry in the new map has an integer key, and has an entire vector of strings as its value. The vector will hold all strings with the frequency indicated by the key integer.  Recall that the `push_back` method in `std::vector` allows you to add an item at the end of a vector.

Once you have done this properly, if run with `monkeys.txt` as input, your `words_by_freq` map will contain entries like this:

key (an _int_) | value (a _vector_ of strings)
-----------------------------------------|------------------------------------------------------------
1 | Mama, called, monkeys, more, no, said
2 | and, doctor, the

You can think of the `words_by_freq` map as a notebook of information, where each entry is a page, and at the top of the page, you wrote an integer frequency, and on the rest of the page, you've written a list of all the words you encountered with that frequency.

To confirm that your code is correct, move onto Part 5 where you will write the code to output its contents.

### Part 5
Using `const_iterators` (not just one but two!), write code to output the contents of the `words_by_freq` map you populated.  This means that for each entry in the map, you will need to output the frequency key, and then iterate separately over the strings in the vector. (Happily, iterators can be used over vectors as well as maps!)

So, if the input words are the contents of `monkeys.txt`, then the output would from this part should be:

```bash
Frequency: 1
Mama
called
monkeys 
more 
no 
said                                                                    
Frequency: 2 
and 
doctor 
the  
```

If some frequency does not exist in the table, then your code should not output it.  For example, if your input was the following words:

`the tall tall tall giraffe`

Then the output from this part would be:

```bash
Frequency: 1
giraffe
the
Frequency: 3
tall
```

:::tip
The words for each frequency shown in the sample output above are shown in alphabetical (dictionary) ordering.  Recall that unlike `std::map` a `std::vector` is not automatically stored in order based on `<`, so think about why this is.  
**Hint:** we did not use `std:sort` or even go out of our way at all to make this happen!
:::
